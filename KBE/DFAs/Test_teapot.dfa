#! NX/KF 4.0 - Test
DefClass: Test (ug_base_part);
(number parameter) body_dia: 100; #tea pot body diameter
(number parameter) wall_thickness: 3; #tea pot wall thickness
(number parameter) lid_dia: 40; #tea pot lid diameter

(number parameter) x: 0;
(number parameter) y: 0;
(number parameter) z: 0;
#Make handle as a ring

#Elements of the path start to form
(child) handle_path: { 
  class, ug_arc;
  radius, body_dia:*0.2;
  start_angle, 0;
  end_angle, 360;
  center, point(x:,y:,z:);
};

(child) handle_profile: { 
  class, ug_arc;
  radius, 5;
  start_angle, 0;
  end_angle, 360;
  center, point(handle_path:radius: + x:,y:,z:);
  X_Axis, Vector(1, 0, 0);
  Y_Axis, Vector(0, 0, -1);
};

#The handle ring

(child) swept_profile: {
  Class, ug_curve_join;
  profile, {handle_profile:};
};
(child) swept_path: {
  Class, ug_curve_join;
  profile, {handle_path:};
};
(child) ring_1: {
  class, ug_swept;
  guide, {{forward, swept_path:}};
  section, {{forward, swept_profile:}};
  scaling, {scale_constant, 1};
  alignment_init, parameter;
  orientation, {orientation_fixed};
  tolerances, {0, 0, 0};
};

# Colored rail - emulating the "rail"
(Child) ring_colored:
{
  Class, ug_body;
  Feature, {ring_1:};
  Layer, 1;
  color, ug_askClosestColor(YELLOW);
};


#Making a handle

(Child) the_handle_cylinder: {
		Class,		ug_cylinder;
		Diameter,	body_dia:*0.4;
		Height, body_dia:*0.1;	
		Origin, point(50, 0, 30);
		Direction, Vector(0, 1, 0);
		};
		
#body sphere for cutting handle
(Child) the_body_cut: {
        Class,        ug_sphere,
        Diameter,     body_dia:,
		Operation, Subtract;
		Target, {the_handle_cylinder:}
    };




